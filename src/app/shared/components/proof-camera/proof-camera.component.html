<div class="proof-camera">
  <!-- ุฑุณุงูุฉ ุงูุฎุทุฃ -->
  <div *ngIf="errorMessage" class="error-message">
    <span class="error-icon">โ๏ธ</span>
    <span class="error-text">{{ errorMessage }}</span>
    <button class="error-close" (click)="errorMessage = ''">โ</button>
  </div>

  <!-- ุญุงูุฉ ุงููุนุงูุฌุฉ -->
  <div *ngIf="isProcessing" class="processing-overlay">
    <div class="spinner">โณ</div>
    <p>ุฌุงุฑู ุฅุนุฏุงุฏ ุงููุงููุฑุง...</p>
  </div>

  <!-- ุงููุงููุฑุง ุงููุดุทุฉ -->
  <div *ngIf="isCameraActive" class="camera-active">
    <!-- ููุฏูู ุงููุงููุฑุง -->
    <div class="camera-preview">
      <video #videoElement autoplay playsinline></video>
      
      <!-- ุดุจูุฉ ุงูุชุฑููุฒ -->
      <div class="focus-grid">
        <div class="grid-line horizontal"></div>
        <div class="grid-line vertical"></div>
        <div class="focus-circle"></div>
      </div>
      
      <!-- ุชุฃุซูุฑ ุงูุชูุงุท ุงูุตูุฑุฉ -->
      <div class="capture-effect" *ngIf="false"></div>
    </div>

    <!-- ุนูุงุตุฑ ุงูุชุญูู ูู ุงููุงููุฑุง -->
    <div class="camera-controls">
      <!-- ุฒุฑ ุฅุบูุงู ุงููุงููุฑุง -->
      <button class="control-btn close-btn" (click)="closeCamera()">
        โ ุฅุบูุงู
      </button>

      <!-- ุชุจุฏูู ุงููุงููุฑุง -->
      <button class="control-btn switch-btn" (click)="switchCamera()">
        {{ cameraIcon }} ุชุจุฏูู
      </button>

      <!-- ุงูุชุญูู ูู ุงูุชูุจูุฑ -->
      <div class="zoom-controls">
        <button class="zoom-btn" (click)="zoomOut()" [disabled]="zoomLevel <= 1">
          โ
        </button>
        <span class="zoom-level">ร{{ zoomLevel.toFixed(1) }}</span>
        <button class="zoom-btn" (click)="zoomIn()" [disabled]="zoomLevel >= maxZoom">
          โ
        </button>
      </div>
    </div>

    <!-- ุฒุฑ ุงูุชูุงุท ุงูุตูุฑุฉ -->
    <div class="capture-section">
      <button class="capture-btn" (click)="capturePhoto()" [disabled]="remainingPhotos <= 0">
        <div class="capture-circle">
          <div class="capture-inner"></div>
        </div>
      </button>
      <p class="photos-counter" *ngIf="remainingPhotos > 0">
        ุจุงูู {{ remainingPhotos }} ุตูุฑ
      </p>
      <p class="photos-counter limit" *ngIf="remainingPhotos <= 0">
        โ๏ธ ูุตูุช ููุญุฏ ุงูุฃูุตู
      </p>
    </div>
  </div>

  <!-- ูุงุฌูุฉ ุจุฏุก ุงููุงููุฑุง -->
  <div *ngIf="!isCameraActive" class="camera-inactive">
    <!-- ูุนุฑุถ ุงูุตูุฑ ุงูููุชูุทุฉ -->
    <div *ngIf="hasPhotos" class="photos-preview">
      <h3 class="photos-title">ุงูุตูุฑ ุงูููุชูุทุฉ ({{ capturedPhotos.length }}/{{ maxPhotos }})</h3>
      
      <div class="photos-grid">
        <div *ngFor="let photo of capturedPhotos; let i = index" class="photo-item">
          <img [src]="photo.preview" [alt]="'ุตูุฑุฉ ' + (i + 1)" class="photo-thumbnail">
          <button class="remove-photo-btn" (click)="removePhoto(i)" title="ุญุฐู ุงูุตูุฑุฉ">
            โ
          </button>
          <span class="photo-number">{{ i + 1 }}</span>
        </div>
        
        <!-- ูุณุงุญุฉ ููุตูุฑ ุงูุฌุฏูุฏุฉ -->
        <div *ngFor="let _ of [].constructor(remainingPhotos)" 
             class="photo-placeholder"
             (click)="startCamera()">
          <span class="placeholder-icon">๐ท</span>
          <span class="placeholder-text">ุฅุถุงูุฉ ุตูุฑุฉ</span>
        </div>
      </div>
      
      <div class="photos-actions">
        <button class="btn secondary" (click)="clearAllPhotos()">
          ๐๏ธ ูุณุญ ุงููู
        </button>
        <button class="btn primary" (click)="startCamera()" [disabled]="remainingPhotos <= 0">
          ๐ธ ุฃุถู ุตูุฑุฉ ุฃุฎุฑู
        </button>
      </div>
    </div>

    <!-- ุฎูุงุฑุงุช ุงูุจุฏุก -->
    <div class="start-options">
      <h3 class="options-title">ููู ุชุฑูุฏ ุฅุถุงูุฉ ุงูุตูุฑุ</h3>
      
      <div class="options-grid">
        <!-- ูุงููุฑุง ุงููุงุชู -->
        <button class="option-card primary" (click)="startCamera()" [disabled]="remainingPhotos <= 0">
          <div class="option-icon">๐ธ</div>
          <h4>ุงููุงููุฑุง</h4>
          <p>ุงูุชุญ ูุงููุฑุง ุงููุงุชู ูุจุงุดุฑุฉ</p>
          <span class="option-badge" *ngIf="remainingPhotos > 0">+{{ remainingPhotos }}</span>
        </button>

        <!-- ูุนุฑุถ ุงูุตูุฑ -->
        <button class="option-card secondary" (click)="openGallery()" [disabled]="remainingPhotos <= 0">
          <div class="option-icon">๐ผ๏ธ</div>
          <h4>ุงููุนุฑุถ</h4>
          <p>ุงุฎุชุฑ ุตูุฑุฉ ูู ูุงุชูู</p>
          <span class="option-badge" *ngIf="remainingPhotos > 0">+{{ remainingPhotos }}</span>
        </button>

        <!-- ุชุญููู ููู -->
        <button class="option-card secondary" (click)="fileInput.click()" [disabled]="remainingPhotos <= 0">
          <div class="option-icon">๐</div>
          <h4>ููู</h4>
          <p>ุฑูุน ุตูุฑุฉ ูู ุงูุฌูุงุฒ</p>
          <span class="option-badge" *ngIf="remainingPhotos > 0">+{{ remainingPhotos }}</span>
        </button>
      </div>

      <!-- ุชุญุฐูุฑ ุฅุฐุง ูุงูุช ุงูุตูุฑ ุฅูุฒุงููุฉ -->
      <div *ngIf="required && !hasPhotos" class="required-warning">
        <span class="warning-icon">โ๏ธ</span>
        <p>ูุฌุจ ุฅุถุงูุฉ ุตูุฑุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู</p>
      </div>

      <!-- ุฒุฑ ุงูุฅุบูุงู -->
      <button class="btn close-option" (click)="closeCamera()">
        โ ุฅูุบุงุก
      </button>
    </div>
  </div>

  <!-- Input ูุฎูู ูุฑูุน ุงููููุงุช -->
  <input #fileInput type="file" accept="image/*" capture="environment" 
         (change)="onFileSelected($event)" style="display: none;" multiple>
</div>